var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},e.parcelRequired7c6=n);var a=n("ll9qB"),r=n("kgjKk"),s=n("cBXj4"),o=n("hbEqn");a=n("ll9qB"),r=n("kgjKk"),s=n("cBXj4"),o=n("hbEqn"),r=n("kgjKk");const l=()=>{r.refs.preloader.classList.remove("show-preloader")},c=()=>{r.refs.preloader.classList.add("show-preloader")};function d(e){const t={};return e.genres.forEach((({id:e,name:i})=>{t[e]=i})),t}function f(e){const t=JSON.stringify(e);localStorage.setItem("genres",t)}n("ll9qB");r=n("kgjKk");async function u(){c();const e=await a.movie.fetchTrendingMovies(),t=await a.movie.fetchMovieGenres();(0,o.saveLocalStorageMovies)(e),a.movie.setCurrentPage(e.page),a.movie.setTotalPages(e.total_pages);f(d(t));let i=(0,o.getLocalStorage)(),n=(0,s.default)(i.results);r.refs.mainMarkFilms.innerHTML=n,r.refs.searchButton.scrollIntoView({block:"center",behavior:"smooth"}),v(),l()}u();document.addEventListener("click",(e=>{const t=e.target.closest(".item-pagination");if(t&&t.parentElement.classList.contains(r.refs.paginationWrapperNode.classList.value)){if("..."===t.textContent)return;a.movie.setCurrentPage(parseInt(t.textContent)),a.movie.firstRequest?u():m()}}));const g=e=>["...",e-2,e-1],p=(e,t)=>[e+1,e+2,"...",t],v=()=>{const e=a.movie.getCurrentPage(),t=a.movie.getTotalPages();if(console.log(t),r.refs.paginationWrapperNode.innerHTML="",1===t)return r.refs.prevPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100",void(r.refs.nextPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100");const i=((e,t)=>{if(1===e&&(r.refs.prevPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100",r.refs.nextPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1"),e===t&&(r.refs.prevPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1",r.refs.nextPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100"),e>1&&e<t&&(r.refs.prevPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1",r.refs.nextPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1"),1===e&&t>9)return[1,2,3,4,5,6,7,"...",t];if(t-e<4&&t>9)return[1,"...",t-6,t-5,t-4,t-3,t-2,t-1,t];if(e>1&&e<5&&t>9)return[1,2,3,4,5,6,7,"...",t];if(e>4&&t>9)return[1,g(e),e,p(e,t)];if(t>1&&t<10){let e=[];for(let i=1;i<=t;i++)e[i-1]=i;return e}})(e,t);let n;n=i.flat(1).map((t=>`<li class="item-pagination"><button class="btn-pagination ${e===t?"active":""}">${t}</button></li>`)),h(n)},h=e=>{r.refs.paginationWrapperNode.childNodes.length>0&&(r.refs.paginationWrapperNode.innerHTML=null),0!==e.length&&r.refs.paginationWrapperNode.insertAdjacentHTML("afterbegin",e.join("").replace(",","."))};async function m(){const e=await a.movie.fetchSearchMovies();(0,o.saveLocalStorageMovies)(e),a.movie.setCurrentPage(e.page),(0,s.default)(e.results),v()}[r.refs.prevPaginationNode,r.refs.nextPaginationNode].map((e=>{e&&e.addEventListener("click",(async()=>{e.classList.value.includes("prev")?a.movie.currentPage-=1:a.movie.currentPage+=1;a.movie.firstRequest?u():m()}))}));a=n("ll9qB"),s=n("cBXj4"),r=n("kgjKk"),o=n("hbEqn");async function y(){setTimeout((()=>r.refs.searchBadResult.hidden=!0),2e3)}r.refs.searchBadResult.hidden=!0,r.refs.searchButton.addEventListener("submit",(async function(e){if(e.preventDefault(),c(),e.currentTarget.searchQuery.value){r.refs.searchBadResult.hidden=!0,a.movie.setSearchValue(e.currentTarget.searchQuery.value),e.currentTarget.searchQuery.value="",a.movie.resetPage();const t=await a.movie.fetchSearchMovies(),i=t.results;if(a.movie.setCurrentPage(t.page),a.movie.setTotalPages(t.total_pages),i.length>0){(0,o.saveLocalStorageMovies)(t);let e=(0,o.getLocalStorage)(),i=(0,s.default)(e.results);r.refs.mainMarkFilms.innerHTML=i,r.refs.searchButton.scrollIntoView({block:"center",behavior:"smooth"}),a.movie.firstRequest=!1,v()}else r.refs.searchBadResult.hidden=!1,y()}else r.refs.searchBadResult.hidden=!1,y();l()})),n("2JGbT"),n("hZJKW"),n("hbEqn"),n("hhHpI"),n("hbEqn");
//# sourceMappingURL=index.213a5f11.js.map
