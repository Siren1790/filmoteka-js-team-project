var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},e.parcelRequired7c6=n);var r=n("kgjKk");const a=()=>{r.refs.preloader.classList.remove("show-preloader")},o=()=>{r.refs.preloader.classList.add("show-preloader")};var s=n("ll9qB"),l=(r=n("kgjKk"),n("cBXj4")),c=n("hbEqn");s=n("ll9qB"),r=n("kgjKk"),l=n("cBXj4"),c=n("hbEqn");function d(e){const t={};return e.genres.forEach((({id:e,name:i})=>{t[e]=i})),t}function f(e){const t=JSON.stringify(e);localStorage.setItem("genres",t)}n("ll9qB");r=n("kgjKk");async function u(){o();const e=await s.movie.fetchTrendingMovies(),t=await s.movie.fetchMovieGenres();(0,c.saveLocalStorageMovies)(e),s.movie.setCurrentPage(e.page),s.movie.setTotalPages(e.total_pages);f(d(t));let i=(0,c.getLocalStorage)(),n=(0,l.default)(i.results);r.refs.mainMarkFilms.innerHTML=n,r.refs.searchButton.scrollIntoView({block:"center",behavior:"smooth"}),p(),a()}u();document.addEventListener("click",(e=>{const t=e.target.closest(".item-pagination");if(t&&t.parentElement.classList.contains(r.refs.paginationWrapperNode.classList.value)){if("..."===t.textContent)return;s.movie.setCurrentPage(parseInt(t.textContent)),s.movie.firstRequest?u():m()}}));const g=e=>["...",e-2,e-1],v=(e,t)=>[e+1,e+2,"...",t],p=()=>{const e=s.movie.getCurrentPage(),t=s.movie.getTotalPages();if(r.refs.paginationWrapperNode.innerHTML="",1===t)return r.refs.prevPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100",void(r.refs.nextPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100");const i=((e,t)=>{if(1===e&&(r.refs.prevPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100",r.refs.nextPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1"),e===t&&(r.refs.prevPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1",r.refs.nextPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100"),e>1&&e<t&&(r.refs.prevPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1",r.refs.nextPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1"),1===e&&t>9)return[1,2,3,4,5,6,7,"...",t];if(t-e<4&&t>9)return[1,"...",t-6,t-5,t-4,t-3,t-2,t-1,t];if(e>1&&e<5&&t>9)return[1,2,3,4,5,6,7,"...",t];if(e>4&&t>9)return[1,g(e),e,v(e,t)];if(t>1&&t<10){let e=[];for(let i=1;i<=t;i++)e[i-1]=i;return e}})(e,t);let n;n=i.flat(1).map((t=>`<li class="item-pagination"><button class="btn-pagination ${e===t?"active":""}">${t}</button></li>`)),h(n)},h=e=>{r.refs.paginationWrapperNode.childNodes.length>0&&(r.refs.paginationWrapperNode.innerHTML=null),0!==e.length&&r.refs.paginationWrapperNode.insertAdjacentHTML("afterbegin",e.join("").replace(",","."))};async function m(){o();const e=await s.movie.fetchSearchMovies();(0,c.saveLocalStorageMovies)(e),s.movie.setCurrentPage(e.page);let t=(0,l.default)(e.results);r.refs.mainMarkFilms.innerHTML=t,p(),a()}window.addEventListener("keydown",(function(e){console.log("event.code =",e.code),"ArrowLeft"===e.code&&s.movie.getCurrentPage()>1&&(s.movie.currentPage-=1);"ArrowRight"===e.code&&s.movie.getTotalPages()>s.movie.getCurrentPage()&&(s.movie.currentPage+=1);s.movie.firstRequest?u():m()})),[r.refs.prevPaginationNode,r.refs.nextPaginationNode].map((e=>{e&&e.addEventListener("click",(async()=>{e.classList.value.includes("prev")?s.movie.currentPage-=1:s.movie.currentPage+=1;s.movie.firstRequest?u():m()}))}));s=n("ll9qB"),l=n("cBXj4"),r=n("kgjKk"),c=n("hbEqn");async function y(){setTimeout((()=>r.refs.searchBadResult.hidden=!0),2e3)}r.refs.searchBadResult.hidden=!0,r.refs.searchButton.addEventListener("submit",(async function(e){if(e.preventDefault(),o(),e.currentTarget.searchQuery.value){r.refs.searchBadResult.hidden=!0,s.movie.setSearchValue(e.currentTarget.searchQuery.value),e.currentTarget.searchQuery.value="",s.movie.resetPage();const t=await s.movie.fetchSearchMovies(),i=t.results;if(s.movie.setCurrentPage(t.page),s.movie.setTotalPages(t.total_pages),i.length>0){(0,c.saveLocalStorageMovies)(t);let e=(0,c.getLocalStorage)(),i=(0,l.default)(e.results);r.refs.mainMarkFilms.innerHTML=i,r.refs.searchButton.scrollIntoView({block:"center",behavior:"smooth"}),s.movie.firstRequest=!1,p()}else r.refs.searchBadResult.hidden=!1,y()}else r.refs.searchBadResult.hidden=!1,y();a()})),n("2JGbT"),n("hZJKW"),n("hbEqn"),n("hhHpI"),n("hbEqn");
//# sourceMappingURL=index.4a7556eb.js.map
