var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in r){var i=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,i.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},e.parcelRequired7c6=i);var n=i("kgjKk");const o=()=>{n.refs.preloader.classList.remove("show-preloader")},s=()=>{n.refs.preloader.classList.add("show-preloader")};var a=i("ll9qB"),l=(n=i("kgjKk"),i("cBXj4")),c=i("hbEqn");a=i("ll9qB"),n=i("kgjKk"),l=i("cBXj4"),c=i("hbEqn");function d(e){const t={};return e.genres.forEach((({id:e,name:r})=>{t[e]=r})),t}function f(e){const t=JSON.stringify(e);localStorage.setItem("genres",t)}i("ll9qB");n=i("kgjKk");async function u(){s();const e=await a.movie.fetchTrendingMovies(),t=await a.movie.fetchMovieGenres();(0,c.saveLocalStorageMovies)(e),a.movie.setCurrentPage(e.page),a.movie.setTotalPages(e.total_pages);f(d(t));let r=(0,c.getLocalStorage)(),i=(0,l.default)(r.results);n.refs.mainMarkFilms.innerHTML=i,n.refs.searchButton.scrollIntoView({block:"center",behavior:"smooth"}),v(),o()}u();document.addEventListener("click",(e=>{const t=e.target.closest(".item-pagination");if(t&&t.parentElement.classList.contains(n.refs.paginationWrapperNode.classList.value)){if("..."===t.textContent)return;a.movie.setCurrentPage(parseInt(t.textContent)),a.movie.firstRequest?(u(),n.refs.scrollToTopButton.click()):(m(),n.refs.scrollToTopButton.click())}}));const g=e=>["...",e-2,e-1],p=(e,t)=>[e+1,e+2,"...",t],v=()=>{const e=a.movie.getCurrentPage(),t=a.movie.getTotalPages();if(n.refs.paginationWrapperNode.innerHTML="",1===t)return n.refs.prevPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100",void(n.refs.nextPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100");const r=((e,t)=>{if(1===e&&(n.refs.prevPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100",n.refs.nextPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1"),e===t&&(n.refs.prevPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1",n.refs.nextPaginationNode.style.cssText="opacity: 0; position: relative; z-index: -100"),e>1&&e<t&&(n.refs.prevPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1",n.refs.nextPaginationNode.style.cssText="opacity: 1; position: relative; z-index: 1"),1===e&&t>9)return[1,2,3,4,5,6,7,"...",t];if(t-e<4&&t>9)return[1,"...",t-6,t-5,t-4,t-3,t-2,t-1,t];if(e>1&&e<5&&t>9)return[1,2,3,4,5,6,7,"...",t];if(e>4&&t>9)return[1,g(e),e,p(e,t)];if(t>1&&t<10){let e=[];for(let r=1;r<=t;r++)e[r-1]=r;return e}})(e,t);let i;i=r.flat(1).map((t=>`<li class="item-pagination"><button class="btn-pagination ${e===t?"active":""}">${t}</button></li>`)),h(i)},h=e=>{n.refs.paginationWrapperNode.childNodes.length>0&&(n.refs.paginationWrapperNode.innerHTML=null),0!==e.length&&n.refs.paginationWrapperNode.insertAdjacentHTML("afterbegin",e.join("").replace(",","."))};async function m(){s();const e=await a.movie.fetchSearchMovies();(0,c.saveLocalStorageMovies)(e),a.movie.setCurrentPage(e.page);let t=(0,l.default)(e.results);n.refs.mainMarkFilms.innerHTML=t,v(),o()}window.addEventListener("keydown",(function(e){"ArrowLeft"===e.code&&a.movie.getCurrentPage()>1&&(a.movie.currentPage-=1,n.refs.scrollToTopButton.click());"ArrowRight"===e.code&&a.movie.getTotalPages()>a.movie.getCurrentPage()&&(a.movie.currentPage+=1,n.refs.scrollToTopButton.click());a.movie.firstRequest?u():m()})),[n.refs.prevPaginationNode,n.refs.nextPaginationNode].map((e=>{e&&e.addEventListener("click",(async()=>{e.classList.value.includes("prev")?a.movie.currentPage-=1:a.movie.currentPage+=1;a.movie.firstRequest?u():m()}))}));a=i("ll9qB"),l=i("cBXj4"),n=i("kgjKk"),c=i("hbEqn");async function T(){setTimeout((()=>n.refs.searchBadResult.hidden=!0),2e3)}n.refs.searchBadResult.hidden=!0,n.refs.searchButton.addEventListener("submit",(async function(e){if(e.preventDefault(),s(),e.currentTarget.searchQuery.value){n.refs.searchBadResult.hidden=!0,a.movie.setSearchValue(e.currentTarget.searchQuery.value),e.currentTarget.searchQuery.value="",a.movie.resetPage();const t=await a.movie.fetchSearchMovies(),r=t.results;if(a.movie.setCurrentPage(t.page),a.movie.setTotalPages(t.total_pages),r.length>0){(0,c.saveLocalStorageMovies)(t);let e=(0,c.getLocalStorage)(),r=(0,l.default)(e.results);n.refs.mainMarkFilms.innerHTML=r,n.refs.searchButton.scrollIntoView({block:"center",behavior:"smooth"}),a.movie.firstRequest=!1,v()}else n.refs.searchBadResult.hidden=!1,T()}else n.refs.searchBadResult.hidden=!1,T();o()})),i("2JGbT"),i("hZJKW"),i("hbEqn"),i("hhHpI"),i("hbEqn");
//# sourceMappingURL=index.cb9092f6.js.map
