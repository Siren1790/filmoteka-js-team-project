{"mappings":"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","sources":["src/partials_js/pagination.js","src/partials_js/main.js","src/partials_js/spinner.js","src/partials_js/local_genres-storage.js","src/partials_js/search.js"],"sourcesContent":["import {movie} from './api';\nimport { refs } from './refs';\nimport createMarkupCardsFilms from './createMarkupCardsFilms';\n\nimport { fetchData } from './main';\n\ndocument.addEventListener('click', (e) => {\n  const target = e.target.closest('.item-pagination');\n  const isTargetCorrect = target && target.parentElement.classList.contains(refs.paginationWrapperNode.classList.value);\n  if (isTargetCorrect) {\n    if(target.textContent === '...') return;\n    movie.fetchTrendingMovies(parseInt(target.textContent))\n      .then(data => {\n        preparePaginationDynamicList();\n        return renderMovies(data.results)\n      });\n  }\n});\nconst getPrevValues = (currentPage) => {\n  if (currentPage >= 5) {\n    return ['...', currentPage -2, currentPage -1]\n  }\n  // \n  if (currentPage > 2 && currentPage < 5){\n    return [\"...\", currentPage -1]\n  }\n\n  if(currentPage <= 2){\n    return[]\n  }\n\n  return [currentPage -2, currentPage -1]\n};\nconst getNextValues = (currentPage) => {\n  return [currentPage + 1, currentPage + 2, '...'];\n}\nconst getPaginationValues = (currentPage, total_pages) => {\n  // if (movie.isFirstPageActive) {\n    if(currentPage == 1){\n    return [2, 3, 4, 5, 6];\n  }\n\n  if (currentPage == total_pages) {\n    // return DEFAULT_END_PAGINATION;\n    return [total_pages - 5, total_pages - 4, total_pages - 3, total_pages - 2, total_pages - 1]\n  }\n  return [getPrevValues(currentPage), currentPage, getNextValues(currentPage)];\n}\nconst preparePaginationDynamicList = () => {\n  refs.paginationWrapperNode.innerHTML = '';\n  // const { currentPage, total_pages} = movie;\n  let currentPage = movie.getCurrentPage();\n  let total_pages = movie.getTotalPages();\n  refs.lastPaginationItemNode.textContent = total_pages;\n  const paginationValues = getPaginationValues(currentPage, total_pages);\n  let nodesArray;\n  nodesArray = paginationValues.flat(1).map((value) => {\n    return `<li class=\"item-pagination\"><button class=\"btn-pagination ${currentPage === value ? 'active' : ''}\">${value}</button></li>`\n  });\n  renderPaginationDynamicList(nodesArray);\n}\nconst renderPaginationDynamicList = (nodes) => {\n  if (refs.paginationWrapperNode.childNodes.length > 0){\n    refs.paginationWrapperNode.innerHTML = null;\n  }\n  if (nodes.length !== 0){\n    refs.paginationWrapperNode.insertAdjacentHTML('afterbegin', nodes.join(\"\").replace(',', '.'))\n  }\n}\n\n[refs.prevPaginationNode, refs.nextPaginationNode].map((node) => {\n  // node && node.addEventListener('click', async () => {\n    node.addEventListener('click', async () => {\n    const pageValue = node.classList.value.includes('prev') ?\n      (movie.currentPage -= 1) : (movie.currentPage += 1);\n     \n          if(movie.firstRequest){\n            // movie.setCurrentPage(event.target.textContent);\n            fetchData();\n          } else{\n            // movie.setCurrentPage(event.target.textContent);\n            const xxx = await movie.fetchSearchMovies();\n            createMarkupCardsFilms(xxx.results);\n          }\n        })\n})\n\n\nexport {preparePaginationDynamicList};","import { movie } from './api';\nimport { refs } from './refs';\nimport createMarkupCardsFilms from './createMarkupCardsFilms';\nimport { saveLocalStorageMovies, getLocalStorage } from './local_storage';\nimport { preloaderHide, preloaderShow } from './spinner';\nimport { preparePaginationDynamicList } from './pagination';\nimport { saveStorageGenres, createGenresObject } from './local_genres-storage';\nimport { refs } from './refs';\n\nasync function fetchData() {\n  preloaderShow();\n  const movies = await movie.fetchTrendingMovies();\n  const genres = await movie.fetchMovieGenres();\n  saveLocalStorageMovies(movies);\n  movie.setCurrentPage(movies.page);\n  movie.setTotalPages(movies.total_pages);\n  const objGenres = createGenresObject(genres);\n  saveStorageGenres(objGenres);\n  let cardsMovies = getLocalStorage();\n  let markup = createMarkupCardsFilms(cardsMovies.results);\n  refs.mainMarkFilms.innerHTML = markup;\n  refs.searchButton.scrollIntoView({ block: 'center', behavior: 'smooth' });\n  preparePaginationDynamicList();\n  preloaderHide();\n}\nfetchData();\n\nexport { fetchData };\n","\nimport { refs } from \"./refs\";\n\nconst preloaderHide = () => {\n\trefs.preloader.classList.remove('show-preloader');\n}\n\nconst preloaderShow = () => {\n\trefs.preloader.classList.add('show-preloader');\n}\n\nexport { preloaderHide, preloaderShow }\n\n","import { movie } from './api';\n\n/**\n *\n * @param {*} array\n * @returns an object contains key=id & value=genre\n */\nfunction createGenresObject(array) {\n  const genres = {};\n\n  array.genres.forEach(({ id, name }) => {\n    genres[id] = name;\n  });\n  return genres;\n}\n\n/**\n *\n * @param {*} genres key\n * @returns an object {id: genre} saved in the Local Storage\n */\nfunction saveStorageGenres(genres) {\n    const key = 'genres';\n    const genresState = JSON.stringify(genres);\n    localStorage.setItem(key, genresState);\n}\n\n\n\n/**\n *\n * @param {*} genre_ids\n * @param {*} loadGenres\n * @returns array of genres and can use for modal\n */\nexport {saveStorageGenres, createGenresObject}","import { movie } from './api';\nimport createMarkupCardsFilms from './createMarkupCardsFilms';\nimport { refs } from './refs';\nimport { saveLocalStorageMovies, getLocalStorage } from './local_storage';\nimport { preloaderHide, preloaderShow } from './spinner';\nimport { preparePaginationDynamicList } from './pagination';\n\nrefs.searchBadResult.hidden = true;\n\nasync function hideErrorMessage() {\n  setTimeout(() => (refs.searchBadResult.hidden = true), 2000);\n}\n\nrefs.searchButton.addEventListener('submit', onSubmit);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  preloaderShow();\n  if (event.currentTarget.searchQuery.value) {\n    refs.searchBadResult.hidden = true;\n    movie.setSearchValue(event.currentTarget.searchQuery.value);\n    event.currentTarget.searchQuery.value = '';\n    movie.resetPage();\n    const response = await movie.fetchSearchMovies();\n    const searchAnswer = response.results;\n\n    movie.setCurrentPage(response.page);\n    movie.setTotalPages(response.total_pages);\n\n    if (searchAnswer.length > 0) {\n      saveLocalStorageMovies(response);\n      let cardsMovies = getLocalStorage();\n      let markup = createMarkupCardsFilms(cardsMovies.results);\n      refs.mainMarkFilms.innerHTML = markup;\n      refs.searchButton.scrollIntoView({\n        block: 'center',\n        behavior: 'smooth',\n      });\n\n      movie.firstRequest = false;\n      preparePaginationDynamicList();\n    } else {\n      refs.searchBadResult.hidden = false;\n      hideErrorMessage();\n    }\n  } else {\n    refs.searchBadResult.hidden = false;\n    hideErrorMessage();\n  }\n  preloaderHide();\n}\n\nexport { onSubmit };\n"],"names":["$bpxeT","parcelRequire","$8d035050df10a3ec$export$f4c41a4539594acb","$2gsSa","refs","preloader","classList","remove","$8d035050df10a3ec$export$c8b0c55c24870a90","add","$51aa41606fb95c30$export$94e2638a41923eca","array","genres","forEach","param","id","name","$51aa41606fb95c30$export$a27d5cb887d5263a","genresState","JSON","stringify","localStorage","setItem","$24dcd06c907632ab$export$8134c072fddab6a5","$24dcd06c907632ab$var$_fetchData","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","movies","cardsMovies","markup","$fpMk3","movie","fetchTrendingMovies","_ctx","sent","fetchMovieGenres","$16XXu","saveLocalStorageMovies","setCurrentPage","page","setTotalPages","total_pages","getLocalStorage","$j9P1y","default","results","mainMarkFilms","innerHTML","searchButton","scrollIntoView","block","behavior","$b4b44c749b77734b$export$8f98098a7ec6ad44","document","addEventListener","e","target","closest","parentElement","contains","paginationWrapperNode","value","textContent","parseInt","then","data","renderMovies","$b4b44c749b77734b$var$getPrevValues","currentPage","$b4b44c749b77734b$var$getNextValues","getCurrentPage","getTotalPages","lastPaginationItemNode","nodesArray","paginationValues","$b4b44c749b77734b$var$getPaginationValues","flat","map","concat","$b4b44c749b77734b$var$renderPaginationDynamicList","nodes","childNodes","length","insertAdjacentHTML","join","replace","prevPaginationNode","nextPaginationNode","node","xxx","includes","firstRequest","fetchSearchMovies","$302c553ce3ce8ba2$var$hideErrorMessage","$302c553ce3ce8ba2$var$_hideErrorMessage","setTimeout","searchBadResult","hidden","$302c553ce3ce8ba2$var$_onSubmit","event","response","searchAnswer","preventDefault","currentTarget","searchQuery","setSearchValue","resetPage"],"version":3,"file":"index.18129f3b.js.map"}