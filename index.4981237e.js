var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in a){var r=a[e];delete a[e];var n={id:e,exports:{}};return t[e]=n,r.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired7c6=r);var n=r("ll9qB"),s=r("kgjKk"),o=r("cBXj4"),i=(n=r("ll9qB"),s=r("kgjKk"),o=r("cBXj4"),r("hbEqn"));s=r("kgjKk");const l=()=>{s.refs.preloader.classList.remove("show-preloader")},c=()=>{s.refs.preloader.classList.add("show-preloader")};function d(e){const t={};return e.genres.forEach((({id:e,name:a})=>{t[e]=a})),t}function u(e){const t=JSON.stringify(e);localStorage.setItem("genres",t)}r("ll9qB");s=r("kgjKk");async function f(){c();const e=await n.movie.fetchTrendingMovies(),t=await n.movie.fetchMovieGenres();(0,i.saveLocalStorageMovies)(e),n.movie.setCurrentPage(e.page),n.movie.setTotalPages(e.total_pages);u(d(t));let a=(0,i.getLocalStorage)(),r=(0,o.default)(a.results);s.refs.mainMarkFilms.innerHTML=r,s.refs.searchButton.scrollIntoView({block:"center",behavior:"smooth"}),h(),l()}f(),document.addEventListener("click",(e=>{const t=e.target.closest(".item-pagination");if(t&&t.parentElement.classList.contains(s.refs.paginationWrapperNode.classList.value)){if("..."===t.textContent)return;n.movie.fetchTrendingMovies(parseInt(t.textContent)).then((e=>(h(),renderMovies(e.results))))}}));const g=e=>e>=5?["...",e-2,e-1]:e>2&&e<5?["...",e-1]:e<=2?[]:[e-2,e-1],v=e=>[e+1,e+2,"..."],h=()=>{s.refs.paginationWrapperNode.innerHTML="";let e=n.movie.getCurrentPage(),t=n.movie.getTotalPages();s.refs.lastPaginationItemNode.textContent=t;const a=((e,t)=>1==e?[2,3,4,5,6]:e==t?[t-5,t-4,t-3,t-2,t-1]:[g(e),e,v(e)])(e,t);let r;r=a.flat(1).map((t=>`<li class="item-pagination"><button class="btn-pagination ${e===t?"active":""}">${t}</button></li>`)),p(r)},p=e=>{s.refs.paginationWrapperNode.childNodes.length>0&&(s.refs.paginationWrapperNode.innerHTML=null),0!==e.length&&s.refs.paginationWrapperNode.insertAdjacentHTML("afterbegin",e.join("").replace(",","."))};[s.refs.prevPaginationNode,s.refs.nextPaginationNode].map((e=>{e.addEventListener("click",(async()=>{e.classList.value.includes("prev")?n.movie.currentPage-=1:n.movie.currentPage+=1;if(n.movie.firstRequest)f();else{const e=await n.movie.fetchSearchMovies();(0,o.default)(e.results)}}))}));n=r("ll9qB"),o=r("cBXj4"),s=r("kgjKk"),i=r("hbEqn");async function m(){setTimeout((()=>s.refs.searchBadResult.hidden=!0),2e3)}s.refs.searchBadResult.hidden=!0,s.refs.searchButton.addEventListener("submit",(async function(e){if(e.preventDefault(),c(),e.currentTarget.searchQuery.value){s.refs.searchBadResult.hidden=!0,n.movie.setSearchValue(e.currentTarget.searchQuery.value),e.currentTarget.searchQuery.value="",n.movie.resetPage();const t=await n.movie.fetchSearchMovies(),a=t.results;if(n.movie.setCurrentPage(t.page),n.movie.setTotalPages(t.total_pages),a.length>0){(0,i.saveLocalStorageMovies)(t);let e=(0,i.getLocalStorage)(),a=(0,o.default)(e.results);s.refs.mainMarkFilms.innerHTML=a,s.refs.searchButton.scrollIntoView({block:"center",behavior:"smooth"}),n.movie.firstRequest=!1,h()}else s.refs.searchBadResult.hidden=!1,m()}else s.refs.searchBadResult.hidden=!1,m();l()})),r("2JGbT"),r("hZJKW"),r("hbEqn"),r("hhHpI"),r("hbEqn");
//# sourceMappingURL=index.4981237e.js.map
