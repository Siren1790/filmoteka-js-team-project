function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"5ZPII":"index.deb61e46.js","j8d51":"no_image.657fab7f.jpg","eM9ss":"library.ebd1c4a6.js"}'));var s,i=a("ll9qB"),o=a("kgjKk");s=new URL(a("kyEFX").resolve("j8d51"),import.meta.url).toString();o=a("kgjKk");function l(e,t){let n=function(e,t){let n=[];if(e)for(const r in t)e.includes(Number(r))&&n.push(" "+t[r]);else n="Sorry, but no information about genres";return n}(e,t);return n&&n.length>=1?n.length>3||n.join("").length>20?(n.splice(2,0," Other"),n.splice(3),n):n:"No information about genres"}function c(t){let n=t.map((({poster_path:t,title:n,genre_ids:r,release_date:a,vote_average:i,id:o})=>{let c=localStorage.getItem("genres");let d=l(r,JSON.parse(c));const g=t?`<img class="img-cover" src="https://image.tmdb.org/t/p/w500${t}" alt="${n}"/>`:`<img class="img-cover" src="${e(s)}" alt="no photo" width="400" height="500">`,u=i?`<p class="rating">${i.toFixed(1)}</p>`:'<p class="rating visually-hidden"></p>';return`<li class="item-films"  data-index-film="${o}">\n                ${g}\n                <p class="title">${n?n.toUpperCase():"Sorry, no information"} </p>\n                <div class="film-info">\n                  <p class="genre">${d}</p>\n                  <p class="year">${a?a.slice(0,4):"N/A"}</p>\n                 ${u}\n                </div>\n              </li>`})).join("");o.refs.mainMarkFilms.innerHTML=n,o.refs.searchButton.scrollIntoView({block:"center",behavior:"smooth"})}i=a("ll9qB");var d=a("hbEqn");o=a("kgjKk");const g=()=>{o.refs.preloader.classList.remove("show-preloader")},u=()=>{o.refs.preloader.classList.add("show-preloader")};function p(e){const t={};return e.genres.forEach((({id:e,name:n})=>{t[e]=n})),t}function f(e){const t=JSON.stringify(e);localStorage.setItem("genres",t)}async function h(){u();const e=await i.movie.fetchTrendingMovies(),t=await i.movie.fetchMovieGenres();(0,d.saveLocalStorageMovies)(e),i.movie.setCurrentPage(e.page),i.movie.setTotalPages(e.total_pages);f(p(t)),c((0,d.getLocalStorage)().results),b(),g()}a("ll9qB"),h(),document.addEventListener("click",(e=>{const t=e.target.closest(".item-pagination");if(t&&t.parentElement.classList.contains(o.refs.paginationWrapperNode.classList.value)){if("..."===t.textContent)return;i.movie.fetchTrendingMovies(parseInt(t.textContent)).then((e=>(b(),renderMovies(e.results))))}}));const v=e=>e>=5?["...",e-2,e-1]:e>2&&e<5?["...",e-1]:e<=2?[]:[e-2,e-1],m=e=>[e+1,e+2,"..."],b=()=>{o.refs.paginationWrapperNode.innerHTML="";let e=i.movie.getCurrentPage(),t=i.movie.getTotalPages();o.refs.lastPaginationItemNode.textContent=t;const n=((e,t)=>1==e?[2,3,4,5,6]:e==t?[t-5,t-4,t-3,t-2,t-1]:[v(e),e,m(e)])(e,t);let r;r=n.flat(1).map((t=>`<li class="item-pagination"><button class="btn-pagination ${e===t?"active":""}">${t}</button></li>`)),y(r)},y=e=>{o.refs.paginationWrapperNode.childNodes.length>0&&(o.refs.paginationWrapperNode.innerHTML=null),0!==e.length&&o.refs.paginationWrapperNode.insertAdjacentHTML("afterbegin",e.join("").replace(",","."))};[o.refs.prevPaginationNode,o.refs.nextPaginationNode].map((e=>{e.addEventListener("click",(async()=>{e.classList.value.includes("prev")?i.movie.currentPage-=1:i.movie.currentPage+=1;if(i.movie.firstRequest)h();else{c((await i.movie.fetchSearchMovies()).results)}}))}));i=a("ll9qB"),o=a("kgjKk"),d=a("hbEqn");async function L(){setTimeout((()=>o.refs.searchBadResult.hidden=!0),2e3)}o.refs.searchBadResult.hidden=!0,o.refs.searchButton.addEventListener("submit",(async function(e){if(e.preventDefault(),u(),e.currentTarget.searchQuery.value){o.refs.searchBadResult.hidden=!0,i.movie.setSearchValue(e.currentTarget.searchQuery.value),e.currentTarget.searchQuery.value="",i.movie.resetPage();const t=await i.movie.fetchSearchMovies(),n=t.results;if(i.movie.setCurrentPage(t.page),i.movie.setTotalPages(t.total_pages),n.length>0){(0,d.saveLocalStorageMovies)(t),c((0,d.getLocalStorage)().results),i.movie.firstRequest=!1,b()}else o.refs.searchBadResult.hidden=!1,L()}else o.refs.searchBadResult.hidden=!1,L();g()})),a("2JGbT"),a("hZJKW"),a("hbEqn"),a("hhHpI"),a("hbEqn");
//# sourceMappingURL=index.deb61e46.js.map
