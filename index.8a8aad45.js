!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"EVgbq":"index.8a8aad45.js","hRQSB":"no_image.657fab7f.jpg","7nwxg":"library.32a0cf0e.js"}'));var i,s=a("bpxeT"),o=a("2TvXO"),c=a("fpMk3"),u=a("2gsSa");i=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("hRQSB");u=a("2gsSa");function l(e,t){var n=function(e,t){var n=[];if(e)for(var r in t)e.includes(Number(r))&&n.push(" "+t[r]);else n="Sorry, but no information about genres";return n}(e,t);return n&&n.length>=1?n.length>3||n.join("").length>20?(n.splice(2,0," Other"),n.splice(3),n):n:"No information about genres"}function f(t){var n=t.map((function(t){var n=t.poster_path,r=t.title,a=t.genre_ids,s=t.release_date,o=t.vote_average,c=t.id,u=localStorage.getItem("genres"),f=l(a,JSON.parse(u)),p=n?'<img class="img-cover" src="'.concat("https://image.tmdb.org/t/p/w500").concat(n,'" alt="').concat(r,'"/>'):'<img class="img-cover" src="'.concat(e(i),'" alt="no photo" width="400" height="500">'),d=o?'<p class="rating">'.concat(o.toFixed(1),"</p>"):'<p class="rating visually-hidden"></p>';return'<li class="item-films"  data-index-film="'.concat(c,'">\n                ').concat(p,'\n                <p class="title">').concat(r?r.toUpperCase():"Sorry, no information",' </p>\n                <div class="film-info">\n                  <p class="genre">').concat(f,'</p>\n                  <p class="year">').concat(s?s.slice(0,4):"N/A","</p>\n                 ").concat(d,"\n                </div>\n              </li>")})).join("");u.refs.mainMarkFilms.innerHTML=n,u.refs.searchButton.scrollIntoView({block:"center",behavior:"smooth"})}s=a("bpxeT"),o=a("2TvXO"),c=a("fpMk3");var p=a("16XXu"),d=(u=a("2gsSa"),function(){u.refs.preloader.classList.remove("show-preloader")}),g=function(){u.refs.preloader.classList.add("show-preloader")};function v(e){var t={};return e.genres.forEach((function(e){var n=e.id,r=e.name;t[n]=r})),t}function h(e){var t=JSON.stringify(e);localStorage.setItem("genres",t)}function m(){return b.apply(this,arguments)}function b(){return(b=e(s)(e(o).mark((function t(){var n,r;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,c.movie.fetchTrendingMovies();case 3:return n=e.sent,e.next=6,c.movie.fetchMovieGenres();case 6:r=e.sent,(0,p.saveLocalStorageMovies)(n),c.movie.setCurrentPage(n.page),c.movie.setTotalPages(n.total_pages),h(v(r)),f((0,p.getLocalStorage)().results),T(),d();case 16:case"end":return e.stop()}}),t)})))).apply(this,arguments)}a("fpMk3"),m(),document.addEventListener("click",(function(e){var t=e.target.closest(".item-pagination");if(t&&t.parentElement.classList.contains(u.refs.paginationWrapperNode.classList.value)){if("..."===t.textContent)return;c.movie.fetchTrendingMovies(parseInt(t.textContent)).then((function(e){return T(),renderMovies(e.results)}))}}));var x=function(e){return e>=5?["...",e-2,e-1]:e>2&&e<5?["...",e-1]:e<=2?[]:[e-2,e-1]},S=function(e){return[e+1,e+2,"..."]},T=function(){u.refs.paginationWrapperNode.innerHTML="";var e=c.movie.getCurrentPage(),t=c.movie.getTotalPages();u.refs.lastPaginationItemNode.textContent=t;var n,r=function(e,t){return 1==e?[2,3,4,5,6]:e==t?[t-5,t-4,t-3,t-2,t-1]:[x(e),e,S(e)]}(e,t);n=r.flat(1).map((function(t){return'<li class="item-pagination"><button class="btn-pagination '.concat(e===t?"active":"",'">').concat(t,"</button></li>")})),w(n)},w=function(e){u.refs.paginationWrapperNode.childNodes.length>0&&(u.refs.paginationWrapperNode.innerHTML=null),0!==e.length&&u.refs.paginationWrapperNode.insertAdjacentHTML("afterbegin",e.join("").replace(",","."))};[u.refs.prevPaginationNode,u.refs.nextPaginationNode].map((function(t){t.addEventListener("click",e(s)(e(o).mark((function n(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.classList.value.includes("prev")?c.movie.currentPage-=1:c.movie.currentPage+=1,!c.movie.firstRequest){e.next=5;break}m(),e.next=9;break;case 5:return e.next=7,c.movie.fetchSearchMovies();case 7:f(e.sent.results);case 9:case"end":return e.stop()}}),n)}))))}));s=a("bpxeT"),o=a("2TvXO"),c=a("fpMk3"),u=a("2gsSa"),p=a("16XXu");function y(){return M.apply(this,arguments)}function M(){return(M=e(s)(e(o).mark((function t(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){return u.refs.searchBadResult.hidden=!0}),2e3);case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function L(){return(L=e(s)(e(o).mark((function t(n){var r,a;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),g(),!n.currentTarget.searchQuery.value){e.next=16;break}return u.refs.searchBadResult.hidden=!0,c.movie.setSearchValue(n.currentTarget.searchQuery.value),n.currentTarget.searchQuery.value="",c.movie.resetPage(),e.next=9,c.movie.fetchSearchMovies();case 9:r=e.sent,a=r.results,c.movie.setCurrentPage(r.page),c.movie.setTotalPages(r.total_pages),a.length>0?((0,p.saveLocalStorageMovies)(r),f((0,p.getLocalStorage)().results),c.movie.firstRequest=!1,T()):(u.refs.searchBadResult.hidden=!1,y()),e.next=17;break;case 16:u.refs.searchBadResult.hidden=!1,y();case 17:d();case 18:case"end":return e.stop()}}),t)})))).apply(this,arguments)}u.refs.searchBadResult.hidden=!0,u.refs.searchButton.addEventListener("submit",(function(e){return L.apply(this,arguments)})),a("6qSli"),a("9xS5m"),a("16XXu"),a("3aQJ8"),a("16XXu")}();
//# sourceMappingURL=index.8a8aad45.js.map
