{"mappings":"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","sources":["src/partials_js/pagination.js","src/partials_js/spinner.js","src/partials_js/main.js","src/partials_js/local_genres-storage.js","src/partials_js/search.js"],"sourcesContent":["import { preloaderHide, preloaderShow } from './spinner';\nimport { movie } from './api';\nimport { refs } from './refs';\nimport createMarkupCardsFilms from './createMarkupCardsFilms';\nimport { saveLocalStorageMovies } from './local_storage';\n\nimport { fetchData } from './main';\n\nconst HIDE_STYLES = 'opacity: 0; position: relative; z-index: -100'; // сховати кнопку\nconst DEFAULT_STYLES = 'opacity: 1; position: relative; z-index: 1'; // показати кнопку\n\ndocument.addEventListener('click', e => {\n  //реакція на кнопки які нарисовані динамічно\n  const target = e.target.closest('.item-pagination');\n  const isTargetCorrect =\n    target &&\n    target.parentElement.classList.contains(\n      refs.paginationWrapperNode.classList.value\n    );\n\n  if (isTargetCorrect) {\n    // нічого не робити, якщо натиснуто на крапки\n    if (target.textContent === '...') return;\n\n    movie.setCurrentPage(parseInt(target.textContent)); // тягнемо з кнопки номер\n    if (movie.firstRequest) {\n      fetchData();\n      refs.scrollToTopButton.click();\n    } else {\n      searchPagination();\n      refs.scrollToTopButton.click();\n    }\n  }\n});\n\nconst getPrevValues = currentPage => {\n  //формуємо другу кнопку\n  return ['...', currentPage - 2, currentPage - 1];\n};\n\nconst getNextValues = (currentPage, total_pages) => {\n  //формуємо передостанню кнопку\n  return [currentPage + 1, currentPage + 2, '...', total_pages];\n};\n\nconst getPaginationValues = (currentPage, total_pages) => {\n  // формує початковий набір кнопок\n  if (currentPage === 1) {\n    refs.prevPaginationNode.style.cssText = HIDE_STYLES; // сховати стрілку <--\n    refs.nextPaginationNode.style.cssText = DEFAULT_STYLES; // показати стрілку -->\n  }\n  if (currentPage === total_pages) {\n    refs.prevPaginationNode.style.cssText = DEFAULT_STYLES; // показати стрілку <--\n    refs.nextPaginationNode.style.cssText = HIDE_STYLES; // сховати стрілку -->\n  }\n  if (currentPage > 1 && currentPage < total_pages) {\n    refs.prevPaginationNode.style.cssText = DEFAULT_STYLES; // показати стрілку <--\n    refs.nextPaginationNode.style.cssText = DEFAULT_STYLES; // показати стрілку -->\n  }\n  if (currentPage === 1 && total_pages > 9)\n    return [1, 2, 3, 4, 5, 6, 7, '...', total_pages];\n  if (total_pages - currentPage < 4 && total_pages > 9)\n    return [\n      1,\n      '...',\n      total_pages - 6,\n      total_pages - 5,\n      total_pages - 4,\n      total_pages - 3,\n      total_pages - 2,\n      total_pages - 1,\n      total_pages,\n    ];\n  if (currentPage > 1 && currentPage < 5 && total_pages > 9)\n    return [1, 2, 3, 4, 5, 6, 7, '...', total_pages];\n  if (currentPage > 4 && total_pages > 9)\n    return [\n      1,\n      getPrevValues(currentPage),\n      currentPage,\n      getNextValues(currentPage, total_pages),\n    ];\n\n  if (total_pages > 1 && total_pages < 10) {\n    let arr = [];\n    for (let i = 1; i <= total_pages; i++) {\n      arr[i - 1] = i;\n    }\n    return arr;\n  }\n};\n\nconst preparePaginationDynamicList = () => {\n  // відповірає за формування масиву з кнопками\n  const currentPage = movie.getCurrentPage();\n  const total_pages = movie.getTotalPages();\n  refs.paginationWrapperNode.innerHTML = ''; // очищаємо блок для кнопок пагінації\n  if (total_pages === 1) {\n    refs.prevPaginationNode.style.cssText = HIDE_STYLES; // сховати стрілку <--\n    refs.nextPaginationNode.style.cssText = HIDE_STYLES; // сховати стрілку -->\n    return;\n  }\n\n  const paginationValues = getPaginationValues(currentPage, total_pages);\n  let nodesArray;\n\n  nodesArray = paginationValues.flat(1).map(value => {\n    // формує масив кнопок\n    return `<li class=\"item-pagination\"><button class=\"btn-pagination ${\n      currentPage === value ? 'active' : ''\n    }\">${value}</button></li>`;\n  });\n  renderPaginationDynamicList(nodesArray); // ТУТ МАЛЮЄМО КНОПКИ\n};\n\nconst renderPaginationDynamicList = nodes => {\n  // відповірає за малювання кнопок\n  if (refs.paginationWrapperNode.childNodes.length > 0) {\n    refs.paginationWrapperNode.innerHTML = null;\n  }\n  if (nodes.length !== 0) {\n    refs.paginationWrapperNode.insertAdjacentHTML(\n      'afterbegin',\n      nodes.join('').replace(',', '.')\n    );\n  }\n};\n\n// KEYBOARD PAGINATION\n// window.addEventListener('keydown', onArrowButtons);\n// function onArrowButtons(event) {\n//   if (event.code === 'ArrowLeft' && movie.getCurrentPage() > 1){\n//     movie.currentPage -= 1;\n//     refs.scrollToTopButton.click();\n//   }\n    \n//   if (    event.code === 'ArrowRight' && movie.getTotalPages() > movie.getCurrentPage()){\n//     movie.currentPage += 1;\n//     refs.scrollToTopButton.click();\n//   }\n    \n//   if (movie.firstRequest) {\n//     fetchData();\n//   } else {\n//     searchPagination();\n//   }\n// }\n\n[refs.prevPaginationNode, refs.nextPaginationNode].map(node => {\n  // відповірає за реакцію на стрілки\n  node &&\n    node.addEventListener('click', async () => {\n      const pageValue = node.classList.value.includes('prev')\n        ? (movie.currentPage -= 1)\n        : (movie.currentPage += 1);\n\n      if (movie.firstRequest) {\n        fetchData();\n      } else {\n        searchPagination();\n      }\n    });\n});\n\nasync function searchPagination() {\n  //SEARCH PAGINATION\n  preloaderShow();\n  const moviesSearch = await movie.fetchSearchMovies();\n  saveLocalStorageMovies(moviesSearch);\n  movie.setCurrentPage(moviesSearch.page);\n  let markup = createMarkupCardsFilms(moviesSearch.results);\n  refs.mainMarkFilms.innerHTML = markup;\n  preparePaginationDynamicList();\n  preloaderHide();\n}\n\nexport { preparePaginationDynamicList };\n","\nimport { refs } from \"./refs\";\n\nconst preloaderHide = () => {\n\trefs.preloader.classList.remove('show-preloader');\n}\n\nconst preloaderShow = () => {\n\trefs.preloader.classList.add('show-preloader');\n}\n\nexport { preloaderHide, preloaderShow }\n\n","\nimport { movie } from './api';\nimport { refs } from './refs';\nimport createMarkupCardsFilms from './createMarkupCardsFilms';\nimport { saveLocalStorageMovies, getLocalStorage } from './local_storage';\nimport { preloaderHide, preloaderShow } from './spinner';\nimport { preparePaginationDynamicList } from './pagination';\nimport { saveStorageGenres, createGenresObject } from './local_genres-storage';\nimport { refs } from './refs';\n\n\nasync function fetchData() {\n  preloaderShow();\n  refs.flag = false;\n  const movies = await movie.fetchTrendingMovies();\n  const genres = await movie.fetchMovieGenres();\n  saveLocalStorageMovies(movies);\n  movie.setCurrentPage(movies.page);\n  movie.setTotalPages(movies.total_pages);\n  const objGenres = createGenresObject(genres);\n  saveStorageGenres(objGenres);\n  let cardsMovies = getLocalStorage();\n  let markup = createMarkupCardsFilms(cardsMovies.results);\n  refs.mainMarkFilms.innerHTML = markup;\n  refs.searchButton.scrollIntoView({ block: 'center', behavior: 'smooth' });\n  preparePaginationDynamicList();\n  preloaderHide();\n}\n\nfetchData();\n\n\nexport { fetchData };\n\n","/**\n *\n * @param {*} array\n * @returns an object contains key=id & value=genre\n */\nfunction createGenresObject(array) {\n  const genres = {};\n\n  array.genres.forEach(({ id, name }) => {\n    genres[id] = name;\n  });\n  return genres;\n}\n\n/**\n *\n * @param {*} genres key\n * @returns an object {id: genre} saved in the Local Storage\n */\nfunction saveStorageGenres(genres) {\n    const key = 'genres';\n    const genresState = JSON.stringify(genres);\n    localStorage.setItem(key, genresState);\n}\n\n\n\n/**\n *\n * @param {*} genre_ids\n * @param {*} loadGenres\n * @returns array of genres and can use for modal\n */\nexport {saveStorageGenres, createGenresObject}","import { movie } from './api';\nimport createMarkupCardsFilms from './createMarkupCardsFilms';\nimport { refs } from './refs';\nimport { saveLocalStorageMovies, getLocalStorage } from './local_storage';\nimport { preloaderHide, preloaderShow } from './spinner';\nimport { preparePaginationDynamicList } from './pagination';\n\nrefs.searchBadResult.hidden = true;\n\nfunction hideErrorMessage() {\n  setTimeout(() => (refs.searchBadResult.hidden = true), 2000);\n}\n\nrefs.searchButton.addEventListener('submit', onSubmit);\n\nasync function onSubmit(event) {\n  console.log(event.currentTarget.searchQuery.value);\n  event.preventDefault();\n  preloaderShow();\n  refs.flag = false;\n  if (event.currentTarget.searchQuery.value) {\n    refs.searchBadResult.hidden = true;\n    movie.setSearchValue(event.currentTarget.searchQuery.value);\n    event.currentTarget.searchQuery.value = '';\n    movie.resetPage();\n\n    const response = await movie.fetchSearchMovies();\n    const searchAnswer = response.results;\n\n    movie.setCurrentPage(response.page);\n    movie.setTotalPages(response.total_pages);\n\n\n    if (searchAnswer.length > 0) {\n      saveLocalStorageMovies(response);\n      let cardsMovies = getLocalStorage();\n      let markup = createMarkupCardsFilms(cardsMovies.results);\n      refs.mainMarkFilms.innerHTML = markup;\n      refs.searchButton.scrollIntoView({\n        block: 'center',\n        behavior: 'smooth',\n      });\n\n      movie.firstRequest = false;\n      preparePaginationDynamicList();\n    } else {\n      refs.searchBadResult.hidden = false;\n      hideErrorMessage();\n    }\n  } else {\n    refs.searchBadResult.hidden = false;\n    hideErrorMessage();\n  }\n  preloaderHide();\n}\n\nexport { onSubmit };\n"],"names":["$bpxeT","parcelRequire","$2gsSa","$8d035050df10a3ec$export$f4c41a4539594acb","refs","preloader","classList","remove","$8d035050df10a3ec$export$c8b0c55c24870a90","add","$51aa41606fb95c30$export$94e2638a41923eca","array","genres","forEach","param","id","name","$51aa41606fb95c30$export$a27d5cb887d5263a","genresState","JSON","stringify","localStorage","setItem","$24dcd06c907632ab$export$8134c072fddab6a5","$24dcd06c907632ab$var$_fetchData","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","movies","cardsMovies","markup","flag","$fpMk3","movie","fetchTrendingMovies","_ctx","sent","fetchMovieGenres","$16XXu","saveLocalStorageMovies","setCurrentPage","page","setTotalPages","total_pages","getLocalStorage","$j9P1y","default","results","mainMarkFilms","innerHTML","searchButton","scrollIntoView","block","behavior","$b4b44c749b77734b$export$8f98098a7ec6ad44","$b4b44c749b77734b$var$HIDE_STYLES","$b4b44c749b77734b$var$DEFAULT_STYLES","document","addEventListener","e","target","closest","parentElement","contains","paginationWrapperNode","value","textContent","parseInt","firstRequest","scrollToTopButton","click","$b4b44c749b77734b$var$searchPagination","$b4b44c749b77734b$var$getPrevValues","currentPage","$b4b44c749b77734b$var$getNextValues","getCurrentPage","getTotalPages","prevPaginationNode","style","cssText","nextPaginationNode","nodesArray","paginationValues","arr","i","$b4b44c749b77734b$var$getPaginationValues","flat","map","concat","$b4b44c749b77734b$var$renderPaginationDynamicList","nodes","childNodes","length","insertAdjacentHTML","join","replace","$b4b44c749b77734b$var$_searchPagination","moviesSearch","fetchSearchMovies","node","includes","$302c553ce3ce8ba2$var$hideErrorMessage","setTimeout","searchBadResult","hidden","$302c553ce3ce8ba2$var$_onSubmit","event","response","searchAnswer","console","log","currentTarget","searchQuery","preventDefault","setSearchValue","resetPage"],"version":3,"file":"index.04a80a10.js.map"}