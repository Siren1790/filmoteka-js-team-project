{"mappings":"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","sources":["src/partials_js/pagination.js","src/partials_js/main.js","src/partials_js/spinner.js","src/partials_js/local_genres-storage.js","src/partials_js/search.js"],"sourcesContent":["import {movie} from './api';\nimport { refs } from './refs';\nimport createMarkupCardsFilms from './createMarkupCardsFilms';\n\nimport { fetchData } from './main';\n\ndocument.addEventListener('click', (e) => {\n  const target = e.target.closest('.item-pagination');\n  const isTargetCorrect = target && target.parentElement.classList.contains(refs.paginationWrapperNode.classList.value);\n  if (isTargetCorrect) {\n    if(target.textContent === '...') return;\n    movie.fetchTrendingMovies(parseInt(target.textContent))\n      .then(data => {\n        preparePaginationDynamicList();\n        return renderMovies(data.results)\n      });\n  }\n});\nconst getPrevValues = (currentPage) => {\n  if (currentPage >= 5) {\n    return ['...', currentPage -2, currentPage -1]\n  }\n  // \n  if (currentPage > 2 && currentPage < 5){\n    return [\"...\", currentPage -1]\n  }\n\n  if(currentPage <= 2){\n    return[]\n  }\n\n  return [currentPage -2, currentPage -1]\n};\nconst getNextValues = (currentPage) => {\n  return [currentPage + 1, currentPage + 2, '...'];\n}\nconst getPaginationValues = (currentPage, total_pages) => {\n  // if (movie.isFirstPageActive) {\n    if(currentPage == 1){\n    return [2, 3, 4, 5, 6];\n  }\n\n  if (currentPage == total_pages) {\n    // return DEFAULT_END_PAGINATION;\n    return [total_pages - 5, total_pages - 4, total_pages - 3, total_pages - 2, total_pages - 1]\n  }\n  return [getPrevValues(currentPage), currentPage, getNextValues(currentPage)];\n}\nconst preparePaginationDynamicList = () => {\n  refs.paginationWrapperNode.innerHTML = '';\n  // const { currentPage, total_pages} = movie;\n  let currentPage = movie.getCurrentPage();\n  let total_pages = movie.getTotalPages();\n  refs.lastPaginationItemNode.textContent = total_pages;\n  const paginationValues = getPaginationValues(currentPage, total_pages);\n  let nodesArray;\n  nodesArray = paginationValues.flat(1).map((value) => {\n    return `<li class=\"item-pagination\"><button class=\"btn-pagination ${currentPage === value ? 'active' : ''}\">${value}</button></li>`\n  });\n  renderPaginationDynamicList(nodesArray);\n}\nconst renderPaginationDynamicList = (nodes) => {\n  if (refs.paginationWrapperNode.childNodes.length > 0){\n    refs.paginationWrapperNode.innerHTML = null;\n  }\n  if (nodes.length !== 0){\n    refs.paginationWrapperNode.insertAdjacentHTML('afterbegin', nodes.join(\"\").replace(',', '.'))\n  }\n}\n\n[refs.prevPaginationNode, refs.nextPaginationNode].map((node) => {\n  // node && node.addEventListener('click', async () => {\n    node.addEventListener('click', async () => {\n    const pageValue = node.classList.value.includes('prev') ?\n      (movie.currentPage -= 1) : (movie.currentPage += 1);\n     \n          if(movie.firstRequest){\n            // movie.setCurrentPage(event.target.textContent);\n            fetchData();\n          } else{\n            // movie.setCurrentPage(event.target.textContent);\n            const xxx = await movie.fetchSearchMovies();\n            createMarkupCardsFilms(xxx.results);\n          }\n        })\n})\n\n\nexport {preparePaginationDynamicList};","import { movie } from \"./api\";\nimport createMarkupCardsFilms from \"./createMarkupCardsFilms\";\nimport {saveLocalStorageMovies, getLocalStorage} from './local_storage';\nimport {preloaderHide, preloaderShow } from './spinner';\nimport { preparePaginationDynamicList} from \"./pagination\";\nimport { saveStorageGenres, createGenresObject } from './local_genres-storage';\n\n\nasync function fetchData (){\n    preloaderShow();\n    const movies = await movie.fetchTrendingMovies();\n    const genres = await movie.fetchMovieGenres();\n    saveLocalStorageMovies(movies);\n    movie.setCurrentPage(movies.page);\n    movie.setTotalPages(movies.total_pages);\n    const objGenres = createGenresObject(genres);\n    saveStorageGenres(objGenres);\n    let cardsMovies = getLocalStorage()\n    createMarkupCardsFilms(cardsMovies.results);\n    preparePaginationDynamicList();\n    preloaderHide();\n}\nfetchData();\n\nexport {fetchData};","\nimport { refs } from \"./refs\";\n\nconst preloaderHide = () => {\n\trefs.preloader.classList.remove('show-preloader');\n}\n\nconst preloaderShow = () => {\n\trefs.preloader.classList.add('show-preloader');\n}\n\nexport { preloaderHide, preloaderShow }\n\n","import { movie } from './api';\n\n/**\n *\n * @param {*} array\n * @returns an object contains key=id & value=genre\n */\nfunction createGenresObject(array) {\n  const genres = {};\n\n  array.genres.forEach(({ id, name }) => {\n    genres[id] = name;\n  });\n  return genres;\n}\n\n/**\n *\n * @param {*} genres key\n * @returns an object {id: genre} saved in the Local Storage\n */\nfunction saveStorageGenres(genres) {\n    const key = 'genres';\n    const genresState = JSON.stringify(genres);\n    localStorage.setItem(key, genresState);\n}\n\n\n\n/**\n *\n * @param {*} genre_ids\n * @param {*} loadGenres\n * @returns array of genres and can use for modal\n */\nexport {saveStorageGenres, createGenresObject}","import { movie } from './api';\nimport createMarkupCardsFilms from './createMarkupCardsFilms';\nimport { refs } from './refs';\nimport { saveLocalStorageMovies, getLocalStorage } from './local_storage';\nimport { preloaderHide, preloaderShow } from './spinner';\nimport { preparePaginationDynamicList } from './pagination';\n\nrefs.searchBadResult.hidden = true;\n\nasync function hideErrorMessage() {\n  setTimeout(() => (refs.searchBadResult.hidden = true), 2000);\n}\n\nrefs.searchButton.addEventListener('submit', onSubmit);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  preloaderShow();\n  if (event.currentTarget.searchQuery.value) {\n    refs.searchBadResult.hidden = true;\n    movie.setSearchValue(event.currentTarget.searchQuery.value);\n    event.currentTarget.searchQuery.value = '';\n    movie.resetPage();\n    const response = await movie.fetchSearchMovies();\n    const searchAnswer = response.results;\n\n    movie.setCurrentPage(response.page);\n    movie.setTotalPages(response.total_pages);\n\n    if (searchAnswer.length > 0) {\n      saveLocalStorageMovies(response);\n      let cardsMovies = getLocalStorage();\n      createMarkupCardsFilms(cardsMovies.results);\n\n      movie.firstRequest = false;\n      preparePaginationDynamicList();\n    } else {\n      refs.searchBadResult.hidden = false;\n      hideErrorMessage();\n    }\n  } else {\n    refs.searchBadResult.hidden = false;\n    hideErrorMessage();\n  }\n  preloaderHide();\n}\n\nexport { onSubmit };\n"],"names":["$ll9qB","parcelRequire","$kgjKk","$a64966ae89115f44$export$f4c41a4539594acb","refs","preloader","classList","remove","$a64966ae89115f44$export$c8b0c55c24870a90","add","$36ac885cdd85b1bf$export$94e2638a41923eca","array","genres","forEach","id","name","$36ac885cdd85b1bf$export$a27d5cb887d5263a","genresState","JSON","stringify","localStorage","setItem","async","$738ac1d93c48538f$export$8134c072fddab6a5","movies","movie","fetchTrendingMovies","fetchMovieGenres","$hbEqn","saveLocalStorageMovies","setCurrentPage","page","setTotalPages","total_pages","cardsMovies","getLocalStorage","$cBXj4","default","results","$19ec9ba508b87b29$export$8f98098a7ec6ad44","document","addEventListener","e","target","closest","parentElement","contains","paginationWrapperNode","value","textContent","parseInt","then","data","renderMovies","$19ec9ba508b87b29$var$getPrevValues","currentPage","$19ec9ba508b87b29$var$getNextValues","innerHTML","getCurrentPage","getTotalPages","lastPaginationItemNode","paginationValues","$19ec9ba508b87b29$var$getPaginationValues","nodesArray","flat","map","$19ec9ba508b87b29$var$renderPaginationDynamicList","nodes","childNodes","length","insertAdjacentHTML","join","replace","prevPaginationNode","nextPaginationNode","node","includes","firstRequest","xxx","fetchSearchMovies","$368590897c3fddc0$var$hideErrorMessage","setTimeout","searchBadResult","hidden","searchButton","event","preventDefault","currentTarget","searchQuery","setSearchValue","resetPage","response","searchAnswer"],"version":3,"file":"index.f8096bac.js.map"}